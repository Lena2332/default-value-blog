const initParams={sliderClass:"slider",trackClass:"slider-track",listClass:"slider-list",slideClass:"slider-slide",sliderInitialize:"slider-initialized",trackDragging:"dragging"},defaultParams={loop:!1,speed:300,slidesPerView:1,additionalSlederClass:"",additionalSlideClass:"",navigation:!1,breakpoints:{},autoplay:!1,autoplay_speed:1e3,showPagination:!0},resolveEvent=t=>-1!==t.type.search("touch")?t.touches[0]:t,transformRegex=/[-0-9.]+(?=px)/,findCurrentBreakpoint=(t,i)=>{if(t.find(t=>t===i))return i;const s=[...t,i].sort((t,i)=>t-i);var e=s.findIndex(t=>t===i);return e?t[e-1]:i},concatStyles=t=>t.filter(t=>t),updateSlideWidth=(t,i)=>{t.style.width=i+"px"};class Slider{constructor(t,i={}){let s;const e=Object.assign({},defaultParams,i);if(t||i.el){if(s=t?document.querySelectorAll(t):s){if(1<s.length)return(s=Array.from(s)).map(t=>new Slider(null,{...e,el:t}));1===s.length&&(e.el=s[0])}this.initParams=e,this.params=e,this.swipePosition={posInit:0,posX1:0,posX2:0,posFinal:0,posThreshold:.4},e.el&&(this.swipeStart=this.swipeStart.bind(this),this.swipeEnd=this.swipeEnd.bind(this),this.swipeAction=this.swipeAction.bind(this),this.initSlider())}}onResizeHandler(){var t=findCurrentBreakpoint(this.breakpointsKeys,window.innerWidth);this.currentBreakpoint!==t&&(this.currentBreakpoint=t,this.updateSliderProps(),this.createPagination(),this.params.navigation&&this.slides.length>this.params.slidesPerView?(this.prevButton.classList.add("active"),this.nextButton.classList.add("active")):(this.prevButton.classList.remove("active"),this.nextButton.classList.remove("active"))),this.containerWidth=this.params.el.offsetWidth,this.slides.forEach(t=>{updateSlideWidth(t,this.getSlideWidth())}),this.toSlide(this.activeIndex)}initAutoplay(){this.params.autoplay&&(this.timerId=setInterval(()=>{this.activeIndex+this.params.slidesPerView<this.slides.length?this.toSlide(this.activeIndex+1,this.params.speed):this.params.loop?this.toSlide(0,this.params.speed):this.toSlide(this.activeIndex,this.params.speed)},this.params.autoplay_speed))}initTrack(){const t=document.createElement("div"),i=document.createElement("div"),s=concatStyles([initParams.slideClass,this.params.additionalSlideClass]);t.classList.add(initParams.listClass),i.classList.add(initParams.trackClass),i.style.cssText=`
            transform: translate3d(0, 0, 0);
            transition: transform ${this.params.speed}ms
        `,this.slides=Array.from(this.params.el.children),this.slides.forEach(t=>{t.classList.add(...s),t.style.width=this.containerWidth/this.params.slidesPerView+"px"}),i.append(...this.params.el.children),t.append(i),this.params.el.append(t),this.track=i}initBreakpoints(){this.breakpointsKeys=Object.keys(this.params.breakpoints).map(t=>+t).filter(t=>Number.isInteger(t)&&0<=t).sort((t,i)=>t-i),this.currentBreakpoint=findCurrentBreakpoint(this.breakpointsKeys,window.innerWidth)}getSlideWidth(){return this.containerWidth/this.params.slidesPerView}updateSliderProps(){if(this.breakpointsKeys.length){const t=this.breakpointsKeys.filter(t=>t<=this.currentBreakpoint),i=t.map(t=>this.params.breakpoints[t]);this.params=i.reduce((t,i)=>({...t,...i}),this.initParams)}}updateNavigation(){if(!this.params.loop)switch(this.activeIndex){case 0:this.prevButton.disabled=!0;break;case this.slides.length-this.params.slidesPerView:this.nextButton.disabled=!0;break;default:this.prevButton.disabled=!1,this.nextButton.disabled=!1}}toSlide(t,i=0){var s=0<t?-1:1,s=t*this.getSlideWidth()*s;this.track.style.transform=`translate3d(${s}px, 0px, 0px)`,this.track.style.transition=`transform ${i}ms`,this.activeIndex=t,this.updateNavigation(),this.updatePagination()}swipeStart(t){t=resolveEvent(t);this.swipePosition.posInit=this.swipePosition.posX1=t.clientX,this.track.style.transition="",document.addEventListener("touchmove",this.swipeAction),document.addEventListener("touchend",this.swipeEnd),document.addEventListener("mousemove",this.swipeAction),document.addEventListener("mouseup",this.swipeEnd)}swipeEnd(){var{posInit:t,posX1:i}=this.swipePosition;this.swipePosition.posFinal=t-i,this.track.classList.remove(initParams.trackDragging),document.removeEventListener("touchmove",this.swipeAction),document.removeEventListener("mousemove",this.swipeAction),document.removeEventListener("touchend",this.swipeEnd),document.removeEventListener("mouseup",this.swipeEnd),this.toSlide(this.calculateSwipeDestinationIndex(),this.params.speed)}swipeAction(t){t=resolveEvent(t);const i=this.track.style.transform;var s=+i.match(transformRegex)[0];this.track.classList.add(initParams.trackDragging),this.swipePosition.posX2=this.swipePosition.posX1-t.clientX,this.swipePosition.posX1=t.clientX,this.track.style.transform=`translate3d(${s-this.swipePosition.posX2}px, 0px, 0px)`}calculateSwipeDestinationIndex(){let t=this.activeIndex;var i=this.getSlideWidth(),s=0<this.swipePosition.posFinal?1:-1,e=Math.abs(this.swipePosition.posFinal),a=Math.floor(e/i);return a&&(t+=a*s),e%i/i>this.swipePosition.posThreshold&&(t+=s),t<0?t=this.params.loop?this.slides.length-this.params.slidesPerView:0:t>this.slides.length-this.params.slidesPerView&&(t=this.params.loop?0:this.slides.length-this.params.slidesPerView),t}initNavigation(){this.params.el.insertAdjacentHTML("beforeend",`
            <button class="slider-control-prev slider-control button-hover" type="button">
                <span class="slider-control-prev-icon"><i class="fas fa-chevron-left"></i></span>
                <span class="slider-control-prev-title">Previous</span>
            </button>
            <button class="slider-control-next slider-control button-hover" type="button">
                <span class="slider-control-next-icon"><i class="fas fa-chevron-right"></i></span>
                <span class="slider-control-prev-title">Next</span>
            </button>
        `),this.prevButton=this.params.el.querySelector(".slider-control-prev"),this.nextButton=this.params.el.querySelector(".slider-control-next"),this.params.navigation&&this.slides.length>this.params.slidesPerView&&(this.prevButton.classList.add("active"),this.nextButton.classList.add("active"))}initPagination(){this.createPagination(!0)}createPagination(t=!1){if(this.params.showPagination&&1<this.slides.length){t||this.params.el.querySelector(".slider-pagination").remove();this.params.el.insertAdjacentHTML("beforeend",`<ul class="slider-pagination">
                                        </ul>`),this.paginationWrap=this.params.el.querySelector(".slider-pagination");for(var i=0;i<=this.slides.length-this.params.slidesPerView;i++){let t="";var s=`<li data-index="${i}" ${t=i===this.activeIndex?'class = "active"':t}></li>`;this.paginationWrap.insertAdjacentHTML("beforeend",s)}}}updatePagination(){if(this.params.showPagination&&1<this.slides.length){let t=this.paginationWrap.querySelectorAll("li");for(var i=0;i<t.length;i++)t[i].classList.remove("active");this.paginationWrap.querySelectorAll('[data-index="'+this.activeIndex+'"]')[0].classList.add("active")}}initEvents(){this.params.el.addEventListener("click",t=>{this.prevButton.contains(t.target)&&this.slidePrev(),this.nextButton.contains(t.target)&&this.slideNext(),this.params.showPagination&&1<this.slides.length&&this.paginationWrap.contains(t.target)&&(t=t.target.dataset.index)&&this.toSlide(t,this.params.speed)}),this.params.el.addEventListener("touchstart",this.swipeStart),this.params.el.addEventListener("mousedown",this.swipeStart),this.params.el.addEventListener("mouseover",()=>{this.params.autoplay&&clearTimeout(this.timerId)}),this.params.el.addEventListener("mouseout",()=>{this.params.autoplay&&this.initAutoplay()})}slideNext(){this.activeIndex+this.params.slidesPerView<this.slides.length?this.toSlide(this.activeIndex+1,this.params.speed):this.params.loop?this.toSlide(0,this.params.speed):this.toSlide(this.activeIndex,this.params.speed)}slidePrev(){0<=this.activeIndex-1?this.toSlide(this.activeIndex-1,this.params.speed):this.params.loop?this.toSlide(this.slides.length-this.params.slidesPerView,this.params.speed):this.toSlide(this.activeIndex,this.params.speed)}initSlider(){const{el:t,additionalSliderClass:i}=this.params;var s=concatStyles([initParams.slideClass,i,initParams.sliderInitialize]);window.addEventListener("resize",()=>{this.onResizeHandler()}),this.containerWidth=t.offsetWidth,this.activeIndex=0,t.classList.add(...s),this.initBreakpoints(),this.updateSliderProps(),this.initTrack(),this.initNavigation(),this.initEvents(),this.updateNavigation(),this.initAutoplay(),this.initPagination(),this.updatePagination()}}export default Slider;
//# sourceMappingURL=../main.map